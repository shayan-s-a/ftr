<template>
    <!-- SearchBar Section -->
    <lightning-spinner if:true={isLoading} alternative-text="Loading" size="small"></lightning-spinner>
    <div class="slds-form-element">
        <label class="slds-form-element__label" ><abbr 
                class="slds-required">*</abbr>{labelName}</label>       
            <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon_left">
                <!-- Search Icon Section -->
                <svg class="slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default" aria-hidden="true">
                <use xlink:href="/apexpages/slds/latest/assets/icons/utility-sprite/svg/symbols.svg#search"></use>
                </svg>
                <input type="text" onchange={handleInputChange} onkeyup={handleInputChange}
                onkeydown={handleInputChange} id="companySelection" class={inputClass} placeholder="Search Companies..." role="textbox"/>                
            </div>             
    </div>
    <!-- Datatable -->
    <br />
    <template if:true={showAccountList}>
        <div class="slds-m-vertical_large" >
            <div class="slds-text-heading_small slds-m-bottom_small">
                Found Companies:
            </div>
            <div style="height: 300px;" data-id="accountList">
                <lightning-datatable class="slds-max-medium-table_stacked" key-field="id" max-row-selection='1' data={accountList} columns={columns} onrowselection={handleCompanySelection}></lightning-datatable>
            </div>
        </div>
    </template>
    
    <!-- Button Section -->
    <div class="slds-grid slds-wrap slds-gutters slds-p-vertical_medium">
        <div class="slds-col slds-order_2 slds-medium-order_1 slds-size_12-of-12 slds-medium-size_3-of-12">
            <lightning-checkbox-group name="Checkbox Group"
                              label=""
                              options={accountCheck}
                              value={value}
                              onchange={handleIsNotOnList}></lightning-checkbox-group>
        </div>
        <div class="slds-col slds-order_1 slds-medium-order_2 slds-size_12-of-12 slds-medium-size_12-of-12">
            <div class="slds-grid slds-wrap slds-grid_align-end omniscript-button-position">
                <div class="omniscript-btn-previous slds-size_12-of-12 slds-m-bottom_xx-small slds-medium-size_2-of-12"
                    if:true={notInList}>                    
                    <button onclick={createCase} type="button"
                        class="vlocity-btn slds-button slds-button_brand slds-size_1-of-1 slds-p-horizontal_none slds-text-align_center">
                        <span class="btnLabel">New Account</span>
                    </button>
                </div>
                <div class="omniscript-btn-next slds-size_12-of-12 slds-m-bottom_xx-small slds-medium-size_2-of-12 slds-m-left_small">
                    <button onclick={goBack} type="button" class="vlocity-btn slds-button slds-button_neutral slds-size_1-of-1 slds-p-horizontal_none slds-text-align_center slds-float_right">
                        <span class="btnLabel">Previous</span>
                    </button>
                </div>
                <div class="omniscript-btn-next slds-size_12-of-12 slds-m-bottom_xx-small slds-medium-size_2-of-12 slds-m-left_small"
                    if:true={isSelected}>
                        <button onclick={goNext} type="button"
                        class="vlocity-btn slds-button slds-button_brand slds-size_1-of-1 slds-p-horizontal_none slds-text-align_center slds-float_right">
                        <span class="btnLabel">Next</span>
                        </button>
                </div>
            </div>
        </div>
    </div>
    
</template>