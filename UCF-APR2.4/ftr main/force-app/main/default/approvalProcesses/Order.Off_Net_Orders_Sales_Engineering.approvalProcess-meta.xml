<?xml version="1.0" encoding="UTF-8"?>
<ApprovalProcess xmlns="http://soap.sforce.com/2006/04/metadata">
    <active>true</active>
    <allowRecall>false</allowRecall>
    <allowedSubmitters>
        <type>owner</type>
    </allowedSubmitters>
    <approvalPageFields>
        <field>OrderNumber</field>
        <field>Name</field>
        <field>Owner</field>
        <field>Order_Stage__c</field>
        <field>Order_Created_Date__c</field>
        <field>Reject_Reason__c</field>
    </approvalPageFields>
    <approvalStep>
        <allowDelegate>true</allowDelegate>
        <approvalActions>
            <action>
                <name>Approval_to_NCM</name>
                <type>FieldUpdate</type>
            </action>
            <action>
                <name>Owner_to_NCM</name>
                <type>FieldUpdate</type>
            </action>
        </approvalActions>
        <assignedApprover>
            <approver>
                <name>Sales_Engineering</name>
                <type>queue</type>
            </approver>
            <whenMultipleApprovers>FirstResponse</whenMultipleApprovers>
        </assignedApprover>
        <label>Sales Engineering</label>
        <name>Sales_Engineering</name>
        <rejectionActions>
            <action>
                <name>Order_Rejected</name>
                <type>Alert</type>
            </action>
            <action>
                <name>Reject_to_AE</name>
                <type>FieldUpdate</type>
            </action>
        </rejectionActions>
    </approvalStep>
    <approvalStep>
        <allowDelegate>true</allowDelegate>
        <approvalActions>
            <action>
                <name>ECR_EWO_In_Progress</name>
                <type>FieldUpdate</type>
            </action>
        </approvalActions>
        <assignedApprover>
            <approver>
                <name>Network_Cost_Management</name>
                <type>queue</type>
            </approver>
            <whenMultipleApprovers>FirstResponse</whenMultipleApprovers>
        </assignedApprover>
        <label>Network Cost Management</label>
        <name>Network_Cost_Management</name>
        <rejectBehavior>
            <type>BackToPrevious</type>
        </rejectBehavior>
        <rejectionActions>
            <action>
                <name>Owner_to_SE_Queue</name>
                <type>FieldUpdate</type>
            </action>
            <action>
                <name>Reject_to_SE</name>
                <type>FieldUpdate</type>
            </action>
        </rejectionActions>
    </approvalStep>
    <approvalStep>
        <allowDelegate>false</allowDelegate>
        <assignedApprover>
            <approver>
                <name>Network_Cost_Management</name>
                <type>queue</type>
            </approver>
            <whenMultipleApprovers>FirstResponse</whenMultipleApprovers>
        </assignedApprover>
        <label>ECR/PSR in Progress</label>
        <name>ECR_PSR_in_Progress</name>
        <rejectBehavior>
            <type>RejectRequest</type>
        </rejectBehavior>
    </approvalStep>
    <description>Create Date &gt;= 05/16/2021
Off-Net orders requiring an SE includes Circuit and Voice Orders

Circuit Change Order
Circuit Move of Voice Change Order
Circuit Move
Circuit New
Voice Change Order
Voice Move Order
Voice New Order
New Order
Move Order
Change Order
Upgrade/Downgrade Order
Ethernet Upgrade/Downgrade - Order(Partner)
Ethernet New Order (Partner)</description>
    <enableMobileDeviceAccess>true</enableMobileDeviceAccess>
    <entryCriteria>
        <booleanFilter>(1 AND 2 AND (3 OR 4)) or (5 and 6) OR (7 AND 8)</booleanFilter>
        <criteriaItems>
            <field>Order.RecordType</field>
            <operation>equals</operation>
            <value>New Order,Move Order,Change Order,Upgrade/Downgrade Order,Ethernet Upgrade/Downgrade - Order (Partner),Ethernet New Order (Partner),Circuit Move Order</value>
        </criteriaItems>
        <criteriaItems>
            <field>Order.CreatedDate</field>
            <operation>greaterOrEqual</operation>
            <value>5/16/2021 7:00 PM</value>
        </criteriaItems>
        <criteriaItems>
            <field>Order.Product__c</field>
            <operation>contains</operation>
            <value>Cloud Managed Solutions,EIA,E-LAN,E-LAN + EIA,E-Reach,EVPL,Frontier AnyWare UCaaS,Managed Firewall,Managed Network Services,National ELAN,Off-Net Ethernet</value>
        </criteriaItems>
        <criteriaItems>
            <field>Order.Is_this_an_E_Reach_Off_Net_Ethernet__c</field>
            <operation>equals</operation>
            <value>Yes</value>
        </criteriaItems>
        <criteriaItems>
            <field>Order.Product_Type__c</field>
            <operation>equals</operation>
            <value>SDWAN</value>
        </criteriaItems>
        <criteriaItems>
            <field>Order.Out_of_Franchise__c</field>
            <operation>equals</operation>
            <value>Yes</value>
        </criteriaItems>
        <criteriaItems>
            <field>Order.RecordType</field>
            <operation>equals</operation>
            <value>,Voice New Order,Circuit Change Order,Circuit Move Order,Circuit New Order,Voice Change Order,Voice Move Order</value>
        </criteriaItems>
        <criteriaItems>
            <field>Order.Is_this_an_Off_Net__c</field>
            <operation>equals</operation>
            <value>Yes</value>
        </criteriaItems>
    </entryCriteria>
    <finalApprovalActions>
        <action>
            <name>Stage_to_Complete</name>
            <type>FieldUpdate</type>
        </action>
    </finalApprovalActions>
    <finalApprovalRecordLock>false</finalApprovalRecordLock>
    <finalRejectionActions>
        <action>
            <name>Reject_to_AE</name>
            <type>FieldUpdate</type>
        </action>
    </finalRejectionActions>
    <finalRejectionRecordLock>false</finalRejectionRecordLock>
    <initialSubmissionActions>
        <action>
            <name>Approve_to_SE</name>
            <type>FieldUpdate</type>
        </action>
        <action>
            <name>Owner_to_SE_Queue</name>
            <type>FieldUpdate</type>
        </action>
    </initialSubmissionActions>
    <label>Off-Net Orders - Sales Engineering</label>
    <processOrder>9</processOrder>
    <recordEditability>AdminOrCurrentApprover</recordEditability>
    <showApprovalHistory>true</showApprovalHistory>
</ApprovalProcess>
