<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>MessageError</name>
        <label>MessageError</label>
        <locationX>314</locationX>
        <locationY>2819</locationY>
        <actionName>FlowCustomError</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Contracted_Units_greater_than_0</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>message</name>
            <value>
                <stringValue>The opportunity cannot be &quot;Closed won&quot; because it does not have a contract with status &quot;Executed&quot;.</stringValue>
            </value>
        </inputParameters>
    </actionCalls>
    <apiVersion>56.0</apiVersion>
    <assignments>
        <name>Add_BDM_UserID</name>
        <label>Add BDM UserID</label>
        <locationX>1458</locationX>
        <locationY>2495</locationY>
        <assignmentItems>
            <assignToReference>BDMUserID</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Get_BDM.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Proforma_Requested_Notification_BDM</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_BDM_UserID_PC</name>
        <label>Add BDM UserID PC</label>
        <locationX>1898</locationX>
        <locationY>2171</locationY>
        <assignmentItems>
            <assignToReference>PC_BDM</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Get_BDM_PC.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Proforma_Completed_Notification_BDM</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_Blake_ID_to_Var</name>
        <label>Add Blake ID to Var</label>
        <locationX>754</locationX>
        <locationY>2279</locationY>
        <assignmentItems>
            <assignToReference>Notif_Receptor</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Get_Blake_Id.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>CRT_Notification</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_Corey_ID_to_Var</name>
        <label>Add Corey ID to Var</label>
        <locationX>1018</locationX>
        <locationY>2279</locationY>
        <assignmentItems>
            <assignToReference>Notif_Receptor</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Get_Corey_Id.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>CRT_Notification</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_Jennifer_ID_to_Var</name>
        <label>Add Jennifer ID to Var</label>
        <locationX>1590</locationX>
        <locationY>2063</locationY>
        <assignmentItems>
            <assignToReference>PRNotif</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Get_Jennifer_ID.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Proforma_Requested_Notification</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssignRecipient</name>
        <label>AssignRecipient</label>
        <locationX>138</locationX>
        <locationY>2279</locationY>
        <assignmentItems>
            <assignToReference>Recipient</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>LoopAssign.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>LoopAssign</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssignTotalDaysToClosedDate</name>
        <label>AssignTotalDaysToClosedDate</label>
        <locationX>1062</locationX>
        <locationY>647</locationY>
        <assignmentItems>
            <assignToReference>TotalDaysToClosedDate</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>GetDaysTotalToClosedDate.Value__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>UpdateCloseDate</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Region_Var_Value</name>
        <label>Region Var Value</label>
        <locationX>1018</locationX>
        <locationY>1955</locationY>
        <assignmentItems>
            <assignToReference>Region_Var</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.ShippingState</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Notificaton_by_Region</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Approval_Status_changed</name>
        <label>Approval Status changed?</label>
        <locationX>1194</locationX>
        <locationY>3995</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Proforma_Low_Approved_or_Proforma_Finan_Approved</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Approval_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Proforma Low Approved</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Approval_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Proforma Finan Approved</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Notification_To_Owner_Approved</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Proforma Low Approved or Proforma Finan Approved</label>
        </rules>
        <rules>
            <name>Proforma_High_Approved</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Approval_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Proforma High Approved</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Notification_to_Owner_High_Approved</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Proforma High Approved</label>
        </rules>
        <rules>
            <name>Rejected</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Approval_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Rejected</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Notification_to_Owner_Rejected</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Rejected</label>
        </rules>
    </decisions>
    <decisions>
        <name>BDM_empty_PC</name>
        <label>BDM empty PC</label>
        <locationX>2030</locationX>
        <locationY>1955</locationY>
        <defaultConnector>
            <targetReference>Contracted_Units_greater_than_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>BDM_Field_Not_Empty_PC</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Account.BDM_Assigned__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue></stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_BDM_PC</targetReference>
            </connector>
            <label>BDM Field Not Empty PC</label>
        </rules>
    </decisions>
    <decisions>
        <name>BDM_empty_PR</name>
        <label>BDM empty PR</label>
        <locationX>1590</locationX>
        <locationY>2279</locationY>
        <defaultConnector>
            <targetReference>Contracted_Units_greater_than_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>BDM_Field_Not_Empty</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Account.BDM_Assigned__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue></stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_BDM</targetReference>
            </connector>
            <label>BDM Field Not Empty</label>
        </rules>
    </decisions>
    <decisions>
        <name>Closed_Won</name>
        <label>Changed to Closed/Won?</label>
        <locationX>1040</locationX>
        <locationY>3203</locationY>
        <defaultConnector>
            <targetReference>OFS_is_blank</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>True</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.StageName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed/Won</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>get_chatter_group</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>True</label>
        </rules>
    </decisions>
    <decisions>
        <name>ClosedDateForUpdateIsNull</name>
        <label>ClosedDateForUpdateIsNull?</label>
        <locationX>974</locationX>
        <locationY>1463</locationY>
        <defaultConnector>
            <targetReference>Update_Close_Date</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_122</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>ClosedDateForUpdate</leftValueReference>
                <operator>EqualTo</operator>
            </conditions>
            <connector>
                <targetReference>Update_Stage_By_Stage</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Contracted_Units_greater_than_0</name>
        <label>Contracted Units greater than 0</label>
        <locationX>1194</locationX>
        <locationY>3095</locationY>
        <defaultConnector>
            <targetReference>OFS_is_blank</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Contracted_Units_Number__c</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Closed_Won</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Date_of_last_stage_change_is_null</name>
        <label>Date of last stage change is null?</label>
        <locationX>974</locationX>
        <locationY>1055</locationY>
        <defaultConnector>
            <targetReference>GetValueForPriorStageValue</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes_update_with_LastStageChangeDate_standard</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.LastStageChangeDate__c</leftValueReference>
                <operator>EqualTo</operator>
            </conditions>
            <conditions>
                <leftValueReference>$Record.LastStageChangeDate</leftValueReference>
                <operator>NotEqualTo</operator>
            </conditions>
            <connector>
                <targetReference>Update_Date_of_last_stage_change_1</targetReference>
            </connector>
            <label>Yes, update with LastStageChangeDate standard</label>
        </rules>
        <rules>
            <name>Yes_3</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.LastStageChangeDate__c</leftValueReference>
                <operator>EqualTo</operator>
            </conditions>
            <conditions>
                <leftValueReference>$Record.LastStageChangeDate</leftValueReference>
                <operator>EqualTo</operator>
            </conditions>
            <connector>
                <targetReference>Update_Date_of_last_stage_change</targetReference>
            </connector>
            <label>Yes, update with Createddate</label>
        </rules>
    </decisions>
    <decisions>
        <name>IsNew</name>
        <label>IsNew?</label>
        <locationX>1194</locationX>
        <locationY>431</locationY>
        <defaultConnector>
            <targetReference>UpdateStage_1</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes_1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>IsNewBoolean</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>GetDaysTotalToClosedDate</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>MDU_Record_type</name>
        <label>MDU Record type?</label>
        <locationX>1854</locationX>
        <locationY>323</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Community_Connections</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.RecordType.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Community Connections</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>IsNew</targetReference>
            </connector>
            <label>Community Connections</label>
        </rules>
    </decisions>
    <decisions>
        <name>Notificaton_by_Region</name>
        <label>Notificaton by Region</label>
        <locationX>1018</locationX>
        <locationY>2063</locationY>
        <defaultConnector>
            <targetReference>Contracted_Units_greater_than_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Blake_Regions</name>
            <conditionLogic>(1 AND 2) OR 3 OR 4 OR 5 OR 6 OR 7 OR 8 OR 9 OR 10 OR 11 OR 12 OR 13 OR 14</conditionLogic>
            <conditions>
                <leftValueReference>Region_Var</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Florida</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Contract_Category__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>New</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Region_Var</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Texas</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Region_Var</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>North Carolina</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Region_Var</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>South Carolina</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Region_Var</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Georgia</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Region_Var</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Alabama</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Region_Var</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Mississippi</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Region_Var</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Tennessee</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Region_Var</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Nebraska</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Region_Var</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Iowa</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Region_Var</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Minessota</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Region_Var</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Wisconsin</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Region_Var</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Ilinois</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Blake_Id</targetReference>
            </connector>
            <label>Blake Regions</label>
        </rules>
        <rules>
            <name>Corey_Regions_Notif</name>
            <conditionLogic>(1 AND 2) OR 3 OR 4 OR 5 OR 6 OR 7 OR 8 OR 9 OR 10 OR 11</conditionLogic>
            <conditions>
                <leftValueReference>Region_Var</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Florida</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Contract_Category__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Renewal</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Region_Var</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>California</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Region_Var</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Arizona</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Region_Var</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Nevada</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Region_Var</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Utah</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Region_Var</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Indiana</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Region_Var</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Michigan</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Region_Var</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Pennsylvania</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Region_Var</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>West Virgina</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Region_Var</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>New York</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Corey_Id</targetReference>
            </connector>
            <label>Corey Regions Notif</label>
        </rules>
    </decisions>
    <decisions>
        <name>OFS_is_blank</name>
        <label>OFS is blank?</label>
        <locationX>1194</locationX>
        <locationY>3695</locationY>
        <defaultConnector>
            <targetReference>Approval_Status_changed</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>is_blank</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Expected_Move_in_Date__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Approval_Status_changed</targetReference>
            </connector>
            <label>is blank</label>
        </rules>
        <rules>
            <name>Is_not_blank</name>
            <conditionLogic>(1 AND 2 AND 3) OR (1 AND 4)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Expected_Move_in_Date__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Expected_Move_in_Date__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>IsNewBoolean</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>IsNewBoolean</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_OFS_for_Account</targetReference>
            </connector>
            <label>Is not blank</label>
        </rules>
    </decisions>
    <decisions>
        <name>OppHasAContractWithStatusExecuted</name>
        <label>OppHasAContractWithStatusExecuted?</label>
        <locationX>446</locationX>
        <locationY>2711</locationY>
        <defaultConnector>
            <targetReference>Contracted_Units_greater_than_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Yes</defaultConnectorLabel>
        <rules>
            <name>No_Has</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>GetContractWithStatusExecuted.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Agreement_Type__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>PAL</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>MessageError</targetReference>
            </connector>
            <label>No</label>
        </rules>
    </decisions>
    <decisions>
        <name>Update_Stage_By_Stage</name>
        <label>Update Stage By Stage</label>
        <locationX>1194</locationX>
        <locationY>1847</locationY>
        <defaultConnector>
            <targetReference>Contracted_Units_greater_than_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>ContractRequested</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.StageName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Contract Requested</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_ID_RoleName_Multifamily_Contracts</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Contract Requested</label>
        </rules>
        <rules>
            <name>ClosedWon</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.StageName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed/Won</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Master_Task_Record_Type</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>ClosedWon</label>
        </rules>
        <rules>
            <name>BDT_Requested</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.StageName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>BDT requested</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Region_Var_Value</targetReference>
            </connector>
            <label>BDT Requested</label>
        </rules>
        <rules>
            <name>Proforma_Requested</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.StageName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Proforma Requested</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Jennifer_ID</targetReference>
            </connector>
            <label>Proforma Requested</label>
        </rules>
        <rules>
            <name>Proforma_Completed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.StageName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Proforma Completed</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>BDM_empty_PC</targetReference>
            </connector>
            <label>Proforma Completed</label>
        </rules>
    </decisions>
    <decisions>
        <name>UpdateStage_1</name>
        <label>UpdateStage</label>
        <locationX>1194</locationX>
        <locationY>947</locationY>
        <defaultConnector>
            <targetReference>Update_Stage_By_Stage</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes_2</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.StageName</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Date_of_last_stage_change_is_null</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <description>Version: 8 ~ On the &apos;Contract Requested&apos; branch, added a condition isActive = true while searching for Multifamily Contracts Role Users.</description>
    <environments>Default</environments>
    <formulas>
        <name>ChangeOrNotToPositive</name>
        <dataType>Number</dataType>
        <expression>IF({!DifferenceOfDaysInStage}&lt;0, {!DifferenceOfDaysInStage}*-1,{!DifferenceOfDaysInStage})</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>CloseDateForNewRecord</name>
        <dataType>Date</dataType>
        <expression>TODAY()+{!TotalDaysToCloseDate_Number}</expression>
    </formulas>
    <formulas>
        <name>ClosedDateForUpdate</name>
        <dataType>Date</dataType>
        <expression>IF({!DifferenceOfDaysInStage}&gt;0, {!$Record.CloseDate}-{!ChangeOrNotToPositive}, {!$Record.CloseDate}+{!ChangeOrNotToPositive})</expression>
    </formulas>
    <formulas>
        <name>DifferenceOfDaysInStage</name>
        <dataType>Number</dataType>
        <expression>VALUE({!GetValueForPriorStageValue.Value__c})-(TODAY()-DATEVALUE({!$Record.LastStageChangeDate__c}))</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>IsNewBoolean</name>
        <dataType>Boolean</dataType>
        <expression>ISNEW()</expression>
    </formulas>
    <formulas>
        <name>OFSDateTime</name>
        <dataType>DateTime</dataType>
        <expression>DATETIMEVALUE(TEXT({!$Record.Expected_Move_in_Date__c})&amp;&apos; &apos;&amp; LEFT(RIGHT(TEXT({!$Flow.CurrentDateTime}),9),8))</expression>
    </formulas>
    <formulas>
        <name>OpportunityLink</name>
        <dataType>String</dataType>
        <expression>LEFT({!$Api.Partner_Server_URL_260}, FIND( &apos;/services&apos;, {!$Api.Partner_Server_URL_260})) &amp; {!$Record.Id}</expression>
    </formulas>
    <formulas>
        <name>TotalDaysToCloseDate_Number</name>
        <dataType>Number</dataType>
        <expression>VALUE({!TotalDaysToClosedDate})</expression>
        <scale>0</scale>
    </formulas>
    <interviewLabel>Record Trigger: Opportunity After Update {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Record Trigger: Opportunity After Update</label>
    <loops>
        <name>LoopAssign</name>
        <label>LoopAssign</label>
        <locationX>50</locationX>
        <locationY>2171</locationY>
        <collectionReference>Get_User_with_User_Role_Multifamily_Contracts</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>AssignRecipient</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>GetCustomNotifiTypeId</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>create_feed</name>
        <label>Create Feed</label>
        <locationX>908</locationX>
        <locationY>3419</locationY>
        <connector>
            <targetReference>OFS_is_blank</targetReference>
        </connector>
        <inputAssignments>
            <field>Body</field>
            <value>
                <elementReference>ChatterBody</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>IsRichText</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ParentId</field>
            <value>
                <elementReference>get_chatter_group.Id</elementReference>
            </value>
        </inputAssignments>
        <object>FeedItem</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Task_AP_Vendor_ID_ACH_Create</name>
        <label>Task AP Vendor ID/ACH - Create</label>
        <locationX>446</locationX>
        <locationY>2387</locationY>
        <connector>
            <targetReference>GetRecordTypeContract</targetReference>
        </connector>
        <inputAssignments>
            <field>Opportunity__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>$Record.Account.OwnerId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Priority</field>
            <value>
                <stringValue>Normal</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RecordTypeId</field>
            <value>
                <elementReference>Get_Master_Task_Record_Type.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Not Started</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Subject</field>
            <value>
                <stringValue>Xactly Setup</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>WhatId</field>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </inputAssignments>
        <object>Task</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Task_Bus_Dev_Handoff_and_External_Kickoff_Create</name>
        <label>Task Bus Dev Handoff and External Kickoff - Create</label>
        <locationX>446</locationX>
        <locationY>2063</locationY>
        <connector>
            <targetReference>Task_Project_Updates_Create</targetReference>
        </connector>
        <inputAssignments>
            <field>Description</field>
            <value>
                <stringValue>Within 30 days of contract signature​</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Opportunity__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>$Record.Account.OwnerId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Priority</field>
            <value>
                <stringValue>Normal</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RecordTypeId</field>
            <value>
                <elementReference>Get_Master_Task_Record_Type.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Not Started</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Subject</field>
            <value>
                <stringValue>Bus Dev Handoff and External Kickoff</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>WhatId</field>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </inputAssignments>
        <object>Task</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Task_Project_Updates_Create</name>
        <label>Task Project Updates - Create</label>
        <locationX>446</locationX>
        <locationY>2171</locationY>
        <connector>
            <targetReference>Task_Xactly_Setup_Create</targetReference>
        </connector>
        <inputAssignments>
            <field>Description</field>
            <value>
                <stringValue>Bi-weekly check-ins scheduled with engineering team​</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Opportunity__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>$Record.Account.OwnerId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Priority</field>
            <value>
                <stringValue>Normal</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RecordTypeId</field>
            <value>
                <elementReference>Get_Master_Task_Record_Type.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Not Started</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Subject</field>
            <value>
                <stringValue>Project Updates</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>WhatId</field>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </inputAssignments>
        <object>Task</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Task_Xactly_Setup_Create</name>
        <label>Task Xactly Setup - Create</label>
        <locationX>446</locationX>
        <locationY>2279</locationY>
        <connector>
            <targetReference>Task_AP_Vendor_ID_ACH_Create</targetReference>
        </connector>
        <inputAssignments>
            <field>Opportunity__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>$Record.Account.OwnerId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Priority</field>
            <value>
                <stringValue>Normal</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RecordTypeId</field>
            <value>
                <elementReference>Get_Master_Task_Record_Type.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Not Started</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Subject</field>
            <value>
                <stringValue>Xactly Setup</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>WhatId</field>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </inputAssignments>
        <object>Task</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordLookups>
        <name>Get_BDM</name>
        <label>Get BDM</label>
        <locationX>1458</locationX>
        <locationY>2387</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Add_BDM_UserID</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.BDM_Assigned__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>User</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_BDM_PC</name>
        <label>Get BDM PC</label>
        <locationX>1898</locationX>
        <locationY>2063</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Add_BDM_UserID_PC</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.BDM_Assigned__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>User</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Blake_Id</name>
        <label>Get Blake Id</label>
        <locationX>754</locationX>
        <locationY>2171</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Add_Blake_ID_to_Var</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Alias</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>jss3790</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>User</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_chatter_group</name>
        <label>Get Chatter Group</label>
        <locationX>908</locationX>
        <locationY>3311</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>create_feed</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>MDU</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>CollaborationGroup</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Corey_Id</name>
        <label>Get Corey Id</label>
        <locationX>1018</locationX>
        <locationY>2171</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Add_Corey_ID_to_Var</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Alias</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>css984</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>User</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_ID_RoleName_Multifamily_Contracts</name>
        <label>Get ID RoleName Multifamily Contracts</label>
        <locationX>50</locationX>
        <locationY>1955</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_User_with_User_Role_Multifamily_Contracts</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Multifamily Contracts</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>UserRole</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Jennifer_ID</name>
        <label>Get Jennifer ID</label>
        <locationX>1590</locationX>
        <locationY>1955</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Add_Jennifer_ID_to_Var</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Alias</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>jgb114</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>User</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Master_Task_Record_Type</name>
        <label>Get Master Task Record Type</label>
        <locationX>446</locationX>
        <locationY>1955</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Task_Bus_Dev_Handoff_and_External_Kickoff_Create</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Master</stringValue>
            </value>
        </filters>
        <filters>
            <field>SobjectType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Task</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>RecordType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_User_with_User_Role_Multifamily_Contracts</name>
        <label>Get User with User Role Multifamily Contracts</label>
        <locationX>50</locationX>
        <locationY>2063</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>LoopAssign</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>UserRoleId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_ID_RoleName_Multifamily_Contracts.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>IsActive</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>User</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetContractWithStatusExecuted</name>
        <label>GetContractWithStatusExecuted</label>
        <locationX>446</locationX>
        <locationY>2603</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>OppHasAContractWithStatusExecuted</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Contract_Team_Status__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Executed</stringValue>
            </value>
        </filters>
        <filters>
            <field>Opportunity__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>RecordTypeId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>GetRecordTypeContract.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Contract</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetCustomNotifiTypeId</name>
        <label>GetCustomNotifiTypeId</label>
        <locationX>50</locationX>
        <locationY>2471</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Send_bell_notification</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>BellNotificacionMDU</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>CustomNotificationType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetDaysTotalToClosedDate</name>
        <label>GetDaysTotalToClosedDate</label>
        <locationX>1062</locationX>
        <locationY>539</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>AssignTotalDaysToClosedDate</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ProcessName__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Opportunity After Update or Creation</stringValue>
            </value>
        </filters>
        <filters>
            <field>Type__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>TotalDays</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>MDU_Variable_Reference__mdt</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetRecordTypeContract</name>
        <label>GetRecordTypeContract</label>
        <locationX>446</locationX>
        <locationY>2495</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>GetContractWithStatusExecuted</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SobjectType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Contract</stringValue>
            </value>
        </filters>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Community_Connections_Agreement</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>RecordType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetValueForPriorStageValue</name>
        <label>GetValueForPriorStageValue</label>
        <locationX>974</locationX>
        <locationY>1355</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>ClosedDateForUpdateIsNull</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ProcessName__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Opportunity After Update or Creation</stringValue>
            </value>
        </filters>
        <filters>
            <field>Type__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record__Prior.StageName</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>MDU_Variable_Reference__mdt</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_Close_Date</name>
        <label>Update Close Date</label>
        <locationX>1062</locationX>
        <locationY>1571</locationY>
        <connector>
            <targetReference>Update_Stage_By_Stage</targetReference>
        </connector>
        <inputAssignments>
            <field>CloseDate</field>
            <value>
                <elementReference>ClosedDateForUpdate</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>LastStageChangeDate__c</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Date_of_last_stage_change</name>
        <label>Update Date of last stage change</label>
        <locationX>974</locationX>
        <locationY>1163</locationY>
        <connector>
            <targetReference>GetValueForPriorStageValue</targetReference>
        </connector>
        <inputAssignments>
            <field>LastStageChangeDate__c</field>
            <value>
                <elementReference>$Record.CreatedDate</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Date_of_last_stage_change_1</name>
        <label>Update Date of last stage change</label>
        <locationX>710</locationX>
        <locationY>1163</locationY>
        <connector>
            <targetReference>GetValueForPriorStageValue</targetReference>
        </connector>
        <inputAssignments>
            <field>LastStageChangeDate__c</field>
            <value>
                <elementReference>$Record.LastStageChangeDate</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_OFS_for_Account</name>
        <label>Update OFS for Account</label>
        <locationX>1150</locationX>
        <locationY>3803</locationY>
        <connector>
            <targetReference>Approval_Status_changed</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Account.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>MDU_OFS_Date_Time__c</field>
            <value>
                <elementReference>OFSDateTime</elementReference>
            </value>
        </inputAssignments>
        <object>Account</object>
    </recordUpdates>
    <recordUpdates>
        <name>UpdateCloseDate</name>
        <label>UpdateCloseDate</label>
        <locationX>1062</locationX>
        <locationY>755</locationY>
        <connector>
            <targetReference>UpdateStage_1</targetReference>
        </connector>
        <inputAssignments>
            <field>CloseDate</field>
            <value>
                <elementReference>CloseDateForNewRecord</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>LastStageChangeDate__c</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <start>
        <locationX>1728</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>MDU_Record_type</targetReference>
        </connector>
        <object>Opportunity</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Obsolete</status>
    <subflows>
        <name>CRT_Notification</name>
        <label>CRT Notification</label>
        <locationX>754</locationX>
        <locationY>2387</locationY>
        <connector>
            <targetReference>Contracted_Units_greater_than_0</targetReference>
        </connector>
        <flowName>Send_Bell_Notification_Subprocess</flowName>
        <inputAssignments>
            <name>Body</name>
            <value>
                <elementReference>CRTNotifBody</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>RecipientId</name>
            <value>
                <elementReference>Notif_Receptor</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>TargetId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>Title</name>
            <value>
                <elementReference>CRTNotifTitle</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <subflows>
        <name>Notification_To_Owner_Approved</name>
        <label>Notification To Owner - Approved</label>
        <locationX>798</locationX>
        <locationY>4103</locationY>
        <flowName>Send_Bell_Notification_Subprocess</flowName>
        <inputAssignments>
            <name>Body</name>
            <value>
                <elementReference>BodyNotif_ProformaApproved</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>RecipientId</name>
            <value>
                <elementReference>RecipientOwnerOpp</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>TargetId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>Title</name>
            <value>
                <elementReference>Title_Notification_OppApp</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <subflows>
        <name>Notification_to_Owner_High_Approved</name>
        <label>Notification to Owner - High Approved</label>
        <locationX>1062</locationX>
        <locationY>4103</locationY>
        <flowName>Send_Bell_Notification_Subprocess</flowName>
        <inputAssignments>
            <name>Body</name>
            <value>
                <elementReference>BodyNotif_ProformaHighApproved</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>RecipientId</name>
            <value>
                <elementReference>RecipientOwnerOpp</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>TargetId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>Title</name>
            <value>
                <elementReference>Title_Notification_OppApp</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <subflows>
        <name>Notification_to_Owner_Rejected</name>
        <label>Notification to Owner - Rejected</label>
        <locationX>1326</locationX>
        <locationY>4103</locationY>
        <flowName>Send_Bell_Notification_Subprocess</flowName>
        <inputAssignments>
            <name>Body</name>
            <value>
                <elementReference>BodyNotif_ProformaRejected</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>RecipientId</name>
            <value>
                <elementReference>RecipientOwnerOpp</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>TargetId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>Title</name>
            <value>
                <elementReference>Title_Notification_OppRej</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <subflows>
        <name>Proforma_Completed_Notification_BDM</name>
        <label>Proforma Completed Notification BDM</label>
        <locationX>1898</locationX>
        <locationY>2279</locationY>
        <connector>
            <targetReference>Contracted_Units_greater_than_0</targetReference>
        </connector>
        <flowName>Send_Bell_Notification_Subprocess</flowName>
        <inputAssignments>
            <name>Body</name>
            <value>
                <elementReference>PC_Body_Notification</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>RecipientId</name>
            <value>
                <elementReference>PC_BDM</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>TargetId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>Title</name>
            <value>
                <elementReference>PC_Titile_Notification</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <subflows>
        <name>Proforma_Requested_Notification</name>
        <label>Proforma Requested Notification</label>
        <locationX>1590</locationX>
        <locationY>2171</locationY>
        <connector>
            <targetReference>BDM_empty_PR</targetReference>
        </connector>
        <flowName>Send_Bell_Notification_Subprocess</flowName>
        <inputAssignments>
            <name>Body</name>
            <value>
                <elementReference>PRNotifBody</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>RecipientId</name>
            <value>
                <elementReference>PRNotif</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>TargetId</name>
            <value>
                <elementReference>$Record__Prior.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>Title</name>
            <value>
                <elementReference>PRNotifTitle</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <subflows>
        <name>Proforma_Requested_Notification_BDM</name>
        <label>Proforma Requested Notification BDM</label>
        <locationX>1458</locationX>
        <locationY>2603</locationY>
        <connector>
            <targetReference>Contracted_Units_greater_than_0</targetReference>
        </connector>
        <flowName>Send_Bell_Notification_Subprocess</flowName>
        <inputAssignments>
            <name>Body</name>
            <value>
                <elementReference>PRNotifBody</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>RecipientId</name>
            <value>
                <elementReference>BDMUserID</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>TargetId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>Title</name>
            <value>
                <elementReference>PRNotifTitle</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <subflows>
        <name>Send_bell_notification</name>
        <label>Send bell notification</label>
        <locationX>50</locationX>
        <locationY>2579</locationY>
        <connector>
            <targetReference>Contracted_Units_greater_than_0</targetReference>
        </connector>
        <flowName>Send_Bell_Notification_Subprocess</flowName>
        <inputAssignments>
            <name>Body</name>
            <value>
                <elementReference>Body_Notif</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>RecipientCollection</name>
            <value>
                <elementReference>Recipient</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>TargetId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>Title</name>
            <value>
                <elementReference>Title_Notification</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <textTemplates>
        <name>ChatterBody</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;New Opportunity Closed/Won!&lt;/p&gt;&lt;p&gt;BDM: {!$Record.Owner.FirstName} {!$Record.Owner.LastName}&lt;/p&gt;&lt;p&gt;Opportunity Name: {!$Record.Name}&lt;/p&gt;&lt;p&gt;Agreement Type: {!$Record.Agreement_Type__c}&lt;/p&gt;&lt;p&gt;Contracted Units: {!$Record.Contracted_Units_Number__c}&lt;/p&gt;</text>
    </textTemplates>
    <variables>
        <name>AddJeniferToVar</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>BDMUserID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Body_Notif</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>An opportunity has changed its stage to &apos;Contract Requested&apos;. Click on this notification to navigate to the Opportunity</stringValue>
        </value>
    </variables>
    <variables>
        <name>BodyNotif_ProformaApproved</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>The Opportunity &quot;{!$Record.Name}&quot; has been approved and the new status is &quot;Internal Approvals Recived&quot;. Click on this notification to navigate to the Opportunity</stringValue>
        </value>
    </variables>
    <variables>
        <name>BodyNotif_ProformaHighApproved</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>The opportunity {!$Record.Name} has been approved  and the new status is &quot;Proforma Sent for Finance Approval&quot;. Review the opportunity and submit the opportunity for the next approval process.</stringValue>
        </value>
    </variables>
    <variables>
        <name>BodyNotif_ProformaRejected</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>The opportunity {!$Record.Name} has been rejected. Click on this notification to navigate to the Opportunity</stringValue>
        </value>
    </variables>
    <variables>
        <name>CRTNotifBody</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>{!$Record.Owner_Full_Name__c} submited an Opportunity</stringValue>
        </value>
    </variables>
    <variables>
        <name>CRTNotifTitle</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>{!$Record.Name} Opportunity Submited</stringValue>
        </value>
    </variables>
    <variables>
        <name>Notif_Receptor</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>PC_BDM</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>PC_Body_Notification</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>Proforma attached to the Opportunity</stringValue>
        </value>
    </variables>
    <variables>
        <name>PC_Titile_Notification</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>{!$Record.Name} is in Proforma Completed stage</stringValue>
        </value>
    </variables>
    <variables>
        <name>PRNotif</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>PRNotifBody</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>{!$Record.Name}  Opportunity</stringValue>
        </value>
    </variables>
    <variables>
        <name>PRNotifTitle</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>Proforma Requested</stringValue>
        </value>
    </variables>
    <variables>
        <name>Recipient</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>RecipientOwnerOpp</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <elementReference>$Record.OwnerId</elementReference>
        </value>
    </variables>
    <variables>
        <name>Region_Var</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Title_Notification</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>Opportunity with stage &apos;Contract Requested&apos;</stringValue>
        </value>
    </variables>
    <variables>
        <name>Title_Notification_OppApp</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>The Opportunity has been approved</stringValue>
        </value>
    </variables>
    <variables>
        <name>Title_Notification_OppRej</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>The Opportunity has been rejected</stringValue>
        </value>
    </variables>
    <variables>
        <name>TotalDaysToClosedDate</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
