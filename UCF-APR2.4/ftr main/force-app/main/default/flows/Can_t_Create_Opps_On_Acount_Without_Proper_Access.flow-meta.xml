<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>56.0</apiVersion>
    <assignments>
        <name>Assign_Matched_Count</name>
        <label>Assign Matched Count</label>
        <locationX>446</locationX>
        <locationY>611</locationY>
        <assignmentItems>
            <assignToReference>varUberHunterRoleCount</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>Match_Role_Name</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Is_it_East_or_West_or_Central</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_BV_to_False</name>
        <label>Set BV to False</label>
        <locationX>534</locationX>
        <locationY>1427</locationY>
        <assignmentItems>
            <assignToReference>$Record.Bypass_Validation__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Set_BV_to_True_1</name>
        <label>Set BV to True 1</label>
        <locationX>50</locationX>
        <locationY>395</locationY>
        <assignmentItems>
            <assignToReference>$Record.Bypass_Validation__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Set_BV_to_True_2</name>
        <label>Set BV to True 2</label>
        <locationX>314</locationX>
        <locationY>827</locationY>
        <assignmentItems>
            <assignToReference>$Record.Bypass_Validation__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Set_BV_to_True_3</name>
        <label>Set BV to True 3</label>
        <locationX>270</locationX>
        <locationY>1427</locationY>
        <assignmentItems>
            <assignToReference>$Record.Bypass_Validation__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
    </assignments>
    <collectionProcessors>
        <name>Match_Role_Name</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>Match Role Name</label>
        <locationX>446</locationX>
        <locationY>503</locationY>
        <assignNextValueToReference>currentItem_Match_Role_Name_0</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>Get_All_Metadata_Records</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_Match_Role_Name_0.Role_Name__c</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <elementReference>$Record.Account.Owner.UserRole.DeveloperName</elementReference>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>Assign_Matched_Count</targetReference>
        </connector>
    </collectionProcessors>
    <decisions>
        <description>Checking Account owner, Account Owner&apos;s Manager, Unassigned User or from specified profiles</description>
        <name>HowAccessGiven</name>
        <label>How Access Given?</label>
        <locationX>402</locationX>
        <locationY>287</locationY>
        <defaultConnector>
            <targetReference>Get_All_Related_Account_Team_Members</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>By Account Team Members</defaultConnectorLabel>
        <rules>
            <name>Yes0</name>
            <conditionLogic>1 OR (2 AND 3) OR 4 OR 5 OR 6 OR 7 OR 8 OR 9 OR 10 OR 11 OR 12 OR 13 OR 14 OR 15 OR 16 OR 19 OR (17 AND 18 )</conditionLogic>
            <conditions>
                <leftValueReference>AccountOwner</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>CurrentlyLoggedInUser</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>AccountOwnerManager</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>null</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>AccountOwnerManager</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>CurrentlyLoggedInUser</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>LoggedInUserProfileName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Partner Support Team</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>LoggedInUserProfileName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Lead Development Rep (LDR)</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>LoggedInUserProfileName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Vice Pres</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>LoggedInUserProfileName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Direct Sales Support Admin</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>LoggedInUserProfileName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Frontier Partner Portal User</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>LoggedInUserProfileName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>#CPE RegionalSalesMgr</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>LoggedInUserProfileName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Frontier System Administrator</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>LoggedInUserProfileName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Frontier Auditor</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>LoggedInUserProfileName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>#Alternate Channel Manager</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>LoggedInUserProfileName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>RFP Coordinator</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>LoggedInUserProfileName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Direct Sales Support</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>LoggedInUserProfileName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>#CTF Small Business User</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account.RecordType.Name</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Master</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>varLoggedUserRole</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$UserRole.DeveloperName</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <stringValue>Retention</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Profile.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>#CTF Customer Service Analyst</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_BV_to_True_1</targetReference>
            </connector>
            <label>By Profile or Ownership</label>
        </rules>
        <rules>
            <name>By_Uber_Hunter_Roles</name>
            <conditionLogic>1 AND 2 AND ( 3 OR 4 OR 5 OR 6 OR 7 OR ( 8 AND 9))</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Account.Owner.UserRoleId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>varLoggedUserRole</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>varLoggedUserRole</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <stringValue>Central_Uber_Hunter</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>varLoggedUserRole</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <stringValue>East_Uber_Hunter</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>varLoggedUserRole</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <stringValue>West_Uber_Hunter</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$UserRole.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>National</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$UserRole.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Nationals_team</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Profile.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>#CTF RegionalSalesMgr</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>isVPs</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_All_Metadata_Records</targetReference>
            </connector>
            <label>By Uber Hunter Roles</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_it_East_or_West_or_Central</name>
        <label>Is it East or West or Central?</label>
        <locationX>446</locationX>
        <locationY>719</locationY>
        <defaultConnector>
            <targetReference>Get_All_Related_Account_Team_Members</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesCentralRoleMatched</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>varUberHunterRoleCount</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>varIsUnassaigned</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_BV_to_True_2</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Oppty_Creation_Rights_Granted</name>
        <label>Is Oppty Creation Rights Granted?</label>
        <locationX>402</locationX>
        <locationY>1319</locationY>
        <defaultConnector>
            <targetReference>Set_BV_to_False</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Oppty_Creation_Rights_Granted</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_All_Related_Account_Team_Members</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_BV_to_True_3</targetReference>
            </connector>
            <label>Oppty Creation Rights Granted</label>
        </rules>
    </decisions>
    <description>To allow uber hunter creating opptys in all region</description>
    <environments>Default</environments>
    <formulas>
        <name>AccountOwner</name>
        <dataType>String</dataType>
        <expression>CASESAFEID({!$Record.Account.Owner.Id})</expression>
    </formulas>
    <formulas>
        <name>AccountOwnerManager</name>
        <dataType>String</dataType>
        <expression>CASESAFEID({!$Record.Account.Owner.ManagerId})</expression>
    </formulas>
    <formulas>
        <name>CurrentlyLoggedInUser</name>
        <dataType>String</dataType>
        <expression>CASESAFEID({!$User.Id})</expression>
    </formulas>
    <formulas>
        <name>isVPs</name>
        <dataType>Boolean</dataType>
        <expression>{!$UserRole.DeveloperName} = &apos;East&apos; || {!$UserRole.DeveloperName} = &apos;West&apos; || {!$UserRole.DeveloperName} = &apos;Central&apos;</expression>
    </formulas>
    <formulas>
        <name>LoggedInUserProfileName</name>
        <dataType>String</dataType>
        <expression>{!$Profile.Name}</expression>
    </formulas>
    <formulas>
        <name>UnassignedUserName</name>
        <dataType>String</dataType>
        <expression>&apos;unassigned.accountexecutive@ftr.com.adminsmdu&apos;</expression>
    </formulas>
    <formulas>
        <name>varIsUnassaigned</name>
        <dataType>Boolean</dataType>
        <expression>({!$Record.Account.Owner.FirstName} = &apos;User&apos; &amp;&amp; {!$Record.Account.Owner.LastName} = &apos;Unassigned&apos;) || ({!$Record.Account.Owner.FirstName} = &apos;Unassigned&apos; &amp;&amp; {!$Record.Account.Owner.LastName} = &apos;User&apos;)</expression>
    </formulas>
    <formulas>
        <name>varLoggedUserRole</name>
        <dataType>String</dataType>
        <expression>{!$UserRole.DeveloperName}</expression>
    </formulas>
    <interviewLabel>Restrict Opportunity Crea {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Can&apos;t Create Opps On Acount Without Proper Access</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>Get_All_Metadata_Records</name>
        <label>Get All Metadata Records</label>
        <locationX>446</locationX>
        <locationY>395</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Match_Role_Name</targetReference>
        </connector>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Role_For_Uber_Hunters__mdt</object>
        <sortField>DeveloperName</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Fetches all account team member records</description>
        <name>Get_All_Related_Account_Team_Members</name>
        <label>Get All Related Account Team Members</label>
        <locationX>402</locationX>
        <locationY>1211</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Is_Oppty_Creation_Rights_Granted</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>AccountId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Account.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>UserId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CurrentlyLoggedInUser</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>AccountTeamMember</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <start>
        <locationX>276</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>HowAccessGiven</targetReference>
        </connector>
        <object>Opportunity</object>
        <recordTriggerType>Create</recordTriggerType>
        <triggerType>RecordBeforeSave</triggerType>
    </start>
    <status>Active</status>
    <variables>
        <name>AccessibleProfile1</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>Frontier Sales User</stringValue>
        </value>
    </variables>
    <variables>
        <name>AccessibleProfile2</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>#BAM - Business Account Manager</stringValue>
        </value>
    </variables>
    <variables>
        <name>AccessibleProfile3</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>#CTF RegionalSalesMgr</stringValue>
        </value>
    </variables>
    <variables>
        <name>currentItem_Central_Roles_0</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Role_For_Uber_Hunters__mdt</objectType>
    </variables>
    <variables>
        <name>currentItem_East_Roles</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Role_For_Uber_Hunters__mdt</objectType>
    </variables>
    <variables>
        <name>currentItem_East_Selected_Role</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Role_For_Uber_Hunters__mdt</objectType>
    </variables>
    <variables>
        <name>currentItem_Match_Role_Name_0</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Role_For_Uber_Hunters__mdt</objectType>
    </variables>
    <variables>
        <name>currentItem_West_Roles</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Role_For_Uber_Hunters__mdt</objectType>
    </variables>
    <variables>
        <name>currentItem_West_Selected_Role</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Role_For_Uber_Hunters__mdt</objectType>
    </variables>
    <variables>
        <name>currentItemFromSourceCollection</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Role_For_Uber_Hunters__mdt</objectType>
    </variables>
    <variables>
        <name>HasAccess</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>varUberHunterRoleCount</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
</Flow>
