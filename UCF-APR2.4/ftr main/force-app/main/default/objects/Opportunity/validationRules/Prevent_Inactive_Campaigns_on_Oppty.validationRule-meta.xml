<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Prevent_Inactive_Campaigns_on_Oppty</fullName>
    <active>true</active>
    <description>Prevents adding inactive campaigns to opportunity</description>
    <errorConditionFormula>AND(
  NOT(
    OR(
      $Profile.Id = &quot;00eE000000126tW&quot;, /* Frontier Auditor */
      $Profile.Id = &quot;00e40000000nYck&quot;, /* Frontier System Administrator */
      $Profile.Id = &quot;00e40000000nTsD&quot;, /* System Administrator */
      $Profile.Id = &quot;00eE000000124Kn&quot; /* System Analyst */
    )
  ),
  OR (
    AND(
      ISCHANGED(Primary_Campaign_Name__c),
      NOT(Campaign.IsActive)
    ),
    AND(
      ISCHANGED(Secondary_Campaign_Name__c),
      NOT(Secondary_Campaign_Name__r.IsActive)
    )
  )
)</errorConditionFormula>
    <errorDisplayField>CampaignId</errorDisplayField>
    <errorMessage>You cannot add an inactive campaign to this opportunity. Please select an active campaign.</errorMessage>
</ValidationRule>
